### 现象：

为什么容器镜像占用的空间并不是所有镜像大小加起来？

### 原因：

- 容器的文件系统类型是: OverlayFS
  - lowerdir: 底层目录, 只读
  - upperdir: 上层目录, 可读写
  - workdir: 工作目录, 用于存储 OverlayFS 的中间文件
  - merged: 合并后的目录, 可读写, 变更内容会反映在 upperdir 中

### 知识理解：

```shell
#!/bin/bash

umount ./merged
rm upper lower merged work -r

mkdir upper lower merged work
echo "I'm from lower!" > lower/in_lower.txt
echo "I'm from upper!" > upper/in_upper.txt
# `in_both` is in both directories
echo "I'm from lower!" > lower/in_both.txt
echo "I'm from upper!" > upper/in_both.txt

  sudo mount -t overlay overlay \
  -o lowerdir=./lower,upperdir=./upper,workdir=./work \
  ./merged



```
